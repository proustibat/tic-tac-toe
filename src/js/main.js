import './imports-css';
import './imports-js';

// App
import APP from './app';

// Generated by build workflow
import './AppInfo';

if ( process.env.NODE_ENV !== 'production' ) {
    console.warn( 'Looks like we are in development mode!' );
}

// HTMLDocument.prototype.ready = d => new Promise( resolve => d.readyState === 'complete' ? resolve(d) : d.addEventListener('DOMContentLoaded', () => resolve(d)) );
// HTMLDocument.prototype.completeState = d => new Promise( resolve => d.readyState === 'complete' ? resolve(d) : d.onreadystatechange = () => d.readyState === 'complete' ? resolve(d) : false );

const waitForComplete = () => {
    return new Promise( resolve => {
        document.onreadystatechange = () => {
            if ( document.readyState === 'complete' ) {
                resolve( document );
            }
        }
    });
};

HTMLDocument.prototype.ready = () => {
    return new Promise( resolve => {
        if ( document.readyState === 'complete' ) {
            resolve( document );
        }
        else {
            waitForComplete().then( () => {
                resolve( document );
            });
        }
    });
};


document.ready( document ).then( () => {
    new APP();
});
